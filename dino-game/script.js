(()=>{"use strict";function t(t,e){return parseFloat(getComputedStyle(t).getPropertyValue(e))||0}function e(t,e,o){t.style.setProperty(e,o)}function o(o,n,c){e(o,n,t(o,n)+c)}const n=.05,c=document.querySelectorAll("[data-ground]"),r=new Audio("audio/die.mp3"),i=new Audio("audio/jump.mp3"),a=new Audio("audio/point.mp3"),d=.45,u=.0015,s=2,l=100,m=document.querySelector("[data-dino]");let f,g,w,p;function y(t){"Space"!==t.code&&"ArrowUp"!==t.code||f||(i.play(),p=d,f=!0)}const h=.05,S=1500,q=2e3,v=document.querySelector("[data-world]");let A;const E=document.querySelector("[data-high-score]");function L(){const t=localStorage.getItem("score");E.textContent=t?`HI : ${t}`:"HI : 0"}const b=3e-5,C=document.querySelector("[data-world]"),I=document.querySelector("[data-score]"),k=document.querySelector("[data-start-screen]"),x=document.querySelector("[data-lose-screen]");let F,H,M;function B(i){if(null==F)return F=i,void window.requestAnimationFrame(B);const d=i-F;if(function(e,r){c.forEach((c=>{o(c,"--left",e*r*n*-1),t(c,"--left")<=-300&&o(c,"--left",600)}))}(d,H),function(t){H+=t*b}(d),function(t){M+=.08*t;const e=Math.floor(M);I.textContent=e,e%500==0&&a.play()}(d),function(n,c){!function(t,e){f?m.src="images/dino-stationary.png":(w>=l&&(g=(g+1)%s,m.src=`images/dino-run-${g}.png`,w-=l),w+=t*e)}(n,c),function(n){f&&(o(m,"--bottom",p*n),t(m,"--bottom")<=0&&(e(m,"--bottom",0),f=!1),p-=u*n)}(n)}(d,H),function(n,c){var r,i;document.querySelectorAll("[data-cactus]").forEach((e=>{o(e,"--left",n*c*h*-1),t(e,"--left")<=-100&&e.remove()})),A<=0&&(function(){const t=document.createElement("img");t.dataset.cactus=!0,t.src="images/cactus.png",t.classList.add("cactus"),e(t,"--left",100),v.append(t)}(),r=S,i=q,A=Math.floor(Math.random()*(i-r+1)+r)/c),A-=n}(d,H),function(){const t=m.getBoundingClientRect();return[...document.querySelectorAll("[data-cactus]")].map((t=>t.getBoundingClientRect())).some((e=>{return n=t,(o=e).left<n.right&&o.top<n.bottom&&o.right>n.left&&o.bottom>n.top;var o,n}))}())return r.play(),m.src="images/dino-lose.png",function(t){const e=localStorage.getItem("score");e&&Number(e)>t||localStorage.setItem("score",String(t))}(Math.floor(M)),L(),x.classList.remove("hide"),void setTimeout((()=>{document.addEventListener("keydown",P,{once:!0})}),300);F=i,window.requestAnimationFrame(B)}function P(){F=null,H=1,M=0,e(c[0],"--left",0),e(c[1],"--left",300),f=!1,g=0,w=0,p=0,e(m,"--bottom",0),document.removeEventListener("keydown",y),document.addEventListener("keydown",y),A=S,document.querySelectorAll("[data-cactus]").forEach((t=>{t.remove()})),k.classList.add("hide"),x.classList.add("hide"),window.requestAnimationFrame(B)}function R(){let t;t=window.innerWidth/window.innerHeight<100/30?window.innerWidth/100:window.innerHeight/30,C.style.width=100*t+"px",C.style.height=30*t+"px"}R(),L(),window.addEventListener("resize",R),document.addEventListener("keydown",P,{once:!0})})();